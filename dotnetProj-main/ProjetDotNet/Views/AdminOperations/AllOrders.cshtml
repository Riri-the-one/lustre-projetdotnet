@model IEnumerable<Order>
@{
	Layout = "_AdminLayout";
	ViewData["Title"] = "All Orders";
}

<div style="max-width: 1400px; margin: 0 auto;">
	<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; flex-wrap: wrap; gap: 20px;">
		<h2 style="font-family: 'Playfair Display', serif; font-size: 32px; font-weight: 400; color: var(--dark-brown); font-style: italic; margin: 0;">Orders Management</h2>
	</div>

	@if (Model != null && Model.Count() > 0)
	{
		<div style="background: linear-gradient(135deg, #FFFFFF 0%, #FEFCF9 100%); border-radius: 20px; padding: 25px; box-shadow: 0 4px 20px rgba(61, 40, 23, 0.08); border: 1px solid rgba(232, 213, 196, 0.3); overflow-x: auto;">
			<table class="table table-hover" style="margin: 0;">
				<thead style="background: linear-gradient(135deg, var(--dark-brown) 0%, #8B6F47 100%); color: white; border-radius: 12px;">
					<tr>
						<th style="padding: 15px; border: none; font-weight: 600;">Order Date</th>
						<th style="padding: 15px; border: none; font-weight: 600;">Name</th>
						<th style="padding: 15px; border: none; font-weight: 600;">Email</th>
						<th style="padding: 15px; border: none; font-weight: 600;">Mobile No</th>
						<th style="padding: 15px; border: none; font-weight: 600;">Address</th>
						<th style="padding: 15px; border: none; font-weight: 600;">Payment Status</th>
						<th style="padding: 15px; border: none; font-weight: 600;">Order Status</th>
						<th style="padding: 15px; border: none; font-weight: 600;">Actions</th>
					</tr>
				</thead>
				<tbody>
					@foreach (var order in Model)
					{
						<tr style="border-bottom: 1px solid rgba(232, 213, 196, 0.3); transition: background 0.2s;">
							<td style="padding: 15px; border: none; color: var(--text-dark);">@order.CreateDate.ToString("dd-MM-yyyy")</td>
							<td style="padding: 15px; border: none; font-weight: 600; color: var(--dark-brown);">@order.Name</td>
							<td style="padding: 15px; border: none; color: var(--text-dark);">@order.Email</td>
							<td style="padding: 15px; border: none; color: var(--text-dark);">@order.MobileNumber</td>
							<td style="padding: 15px; border: none; color: var(--text-dark); max-width: 200px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">@order.Address</td>
							<td style="padding: 15px; border: none;">
								<span class="badge" style="padding: 6px 12px; border-radius: 20px; font-size: 13px; font-weight: 600; @(order.IsPaid ? "background: #d4edda; color: #155724;" : "background: #fff3cd; color: #856404;")">
									@order.PaymentMethod | @(order.IsPaid ? "Paid" : "Not Paid")
								</span>
							</td>
							<td style="padding: 15px; border: none;">
								<span class="badge" style="padding: 6px 12px; border-radius: 20px; font-size: 13px; font-weight: 600; background: #e7f3ff; color: #004085;">
									@order.OrderStatus.StatusName
								</span>
							</td>
							<td style="padding: 15px; border: none;">
								<div style="display: flex; gap: 8px; flex-wrap: wrap;">
									<button type="button" data-bs-toggle="modal" data-bs-target="#modal-@order.Id" class="btn btn-primary btn-sm" style="border-radius: 8px; padding: 8px 16px; display: inline-flex; align-items: center; gap: 6px; font-size: 14px;">
										<i class="bi bi-eye"></i> Details
									</button>
									<a asp-action="UpdateOrderStatus" asp-route-orderId="@order.Id" class="btn btn-info btn-sm" style="border-radius: 8px; padding: 8px 16px; display: inline-flex; align-items: center; gap: 6px; font-size: 14px;">
										<i class="bi bi-pencil"></i> Status
									</a>
									<a asp-action="TogglePaymentStatus" asp-route-orderId="@order.Id" class="btn btn-warning btn-sm" style="border-radius: 8px; padding: 8px 16px; display: inline-flex; align-items: center; gap: 6px; font-size: 14px;">
										<i class="bi bi-credit-card"></i> Payment
									</a>
								</div>
								@await Html.PartialAsync("/Views/AdminOperations/_OrderDetailModel.cshtml", new OrderDetailModelDTO { DivId = order.Id.ToString(), OrderDetail = order.OrderDetails })
							</td>
						</tr>
					}
				</tbody>
			</table>
		</div>
	}
	else
	{
		<div style="background: linear-gradient(135deg, #FFFFFF 0%, #FEFCF9 100%); border-radius: 20px; padding: 40px; text-align: center; box-shadow: 0 4px 20px rgba(61, 40, 23, 0.08); border: 1px solid rgba(232, 213, 196, 0.3);">
			<h4 style="font-family: 'Playfair Display', serif; color: var(--dark-brown); margin-bottom: 15px;">No orders found</h4>
			<p style="color: var(--text-dark);">There are no orders to display at this time.</p>
		</div>
	}
</div>

<style>
	.table tbody tr:hover {
		background-color: rgba(232, 213, 196, 0.1);
	}
</style>
