@model IEnumerable<Product>
@{
	Layout = "_AdminLayout";
	ViewData["Title"] = "Products Management";
}

<div style="max-width: 1200px; margin: 0 auto;">
	<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; flex-wrap: wrap; gap: 20px;">
		<h2 style="font-family: 'Playfair Display', serif; font-size: 32px; font-weight: 400; color: var(--dark-brown); font-style: italic; margin: 0;">Products Management</h2>
		<a asp-action="AddProduct" asp-controller="Product" class="btn btn-primary" style="border-radius: 12px; padding: 12px 24px; display: flex; align-items: center; gap: 8px;">
			<i class="bi bi-plus-circle"></i> Add New Product
		</a>
	</div>

	@if (Model?.Count() > 0)
	{
		<div class="table-responsive" style="background: linear-gradient(135deg, #FFFFFF 0%, #FEFCF9 100%); border-radius: 20px; padding: 25px; box-shadow: 0 4px 20px rgba(61, 40, 23, 0.08); border: 1px solid rgba(232, 213, 196, 0.3);">
			<table class="table table-hover" style="margin: 0;">
				<thead style="background: linear-gradient(135deg, var(--dark-brown) 0%, #8B6F47 100%); color: white; border-radius: 12px;">
					<tr>
						<th style="padding: 15px; border: none; font-weight: 600;">Image</th>
						<th style="padding: 15px; border: none; font-weight: 600;">Product Name</th>
						<th style="padding: 15px; border: none; font-weight: 600;">Brand</th>
						<th style="padding: 15px; border: none; font-weight: 600;">Category</th>
						<th style="padding: 15px; border: none; font-weight: 600;">Price (MAD)</th>
						<th style="padding: 15px; border: none; font-weight: 600;">Stock</th>
						<th style="padding: 15px; border: none; font-weight: 600;">Actions</th>
					</tr>
				</thead>
				<tbody>
					@foreach (var product in Model)
					{
						<tr style="border-bottom: 1px solid rgba(232, 213, 196, 0.3); transition: background 0.2s;">
							<td style="padding: 15px; border: none;">
								@if (string.IsNullOrWhiteSpace(product.Image))
								{
									<img src="/images/NoImage.png" style="width:80px;height:100px;object-fit:cover; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" alt="product image" class="img-thumbnail" />
								}
								else
								{
									<img src="/images/@product.Image" style="width:80px;height:100px;object-fit:cover; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" alt="@product.ProductName" class="img-thumbnail" />
								}
							</td>
							<td style="padding: 15px; border: none; font-weight: 600; color: var(--dark-brown);">@product.ProductName</td>
							<td style="padding: 15px; border: none; color: var(--text-dark);">@product.BrandName</td>
							<td style="padding: 15px; border: none; color: var(--text-dark);">@product.Category?.CategoryName</td>
							<td style="padding: 15px; border: none; font-weight: 600; color: var(--dark-brown);">@product.Price.ToString("F2")</td>
							<td style="padding: 15px; border: none;">
								@{
									var stockQty = product.Stock?.Quantity ?? 0;
								}
								<span class="badge" style="padding: 8px 16px; border-radius: 20px; font-size: 14px; font-weight: 600; @(stockQty > 0 ? "background: #d4edda; color: #155724;" : "background: #f8d7da; color: #721c24;")">
									@stockQty
								</span>
							</td>
							<td style="padding: 15px; border: none;">
								<div style="display: flex; gap: 8px; flex-wrap: wrap;">
									<a asp-action="UpdateProduct" asp-controller="Product" asp-route-id="@product.Id" class="btn btn-success btn-sm" style="border-radius: 8px; padding: 8px 16px; display: inline-flex; align-items: center; gap: 6px; font-size: 14px;">
										<i class="bi bi-pencil-square"></i> Edit
									</a>
									<a asp-action="DeleteProduct" asp-controller="Product" asp-route-id="@product.Id" class="btn btn-danger btn-sm" onclick="return confirm('Are you sure you want to delete this product?')" style="border-radius: 8px; padding: 8px 16px; display: inline-flex; align-items: center; gap: 6px; font-size: 14px;">
										<i class="bi bi-trash"></i> Delete
									</a>
								</div>
							</td>
						</tr>
					}
				</tbody>
			</table>
		</div>
	}
	else
	{
		<div style="background: linear-gradient(135deg, #FFFFFF 0%, #FEFCF9 100%); border-radius: 20px; padding: 40px; text-align: center; box-shadow: 0 4px 20px rgba(61, 40, 23, 0.08); border: 1px solid rgba(232, 213, 196, 0.3);">
			<h4 style="font-family: 'Playfair Display', serif; color: var(--dark-brown); margin-bottom: 15px;">No products found</h4>
			<p style="color: var(--text-dark); margin-bottom: 25px;">Start by adding your first product.</p>
			<a asp-action="AddProduct" asp-controller="Product" class="btn btn-primary" style="border-radius: 12px; padding: 12px 24px;">
				<i class="bi bi-plus-circle"></i> Add Product
			</a>
		</div>
	}
</div>

<style>
	.table tbody tr:hover {
		background-color: rgba(232, 213, 196, 0.1);
	}
</style>
