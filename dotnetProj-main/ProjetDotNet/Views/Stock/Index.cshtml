@model IEnumerable<StockDisplayModel>
@{
	Layout = "_AdminLayout";
	ViewData["Title"] = "Stock Management";
}

<div style="max-width: 1200px; margin: 0 auto;">
	<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; flex-wrap: wrap; gap: 20px;">
		<h2 style="font-family: 'Playfair Display', serif; font-size: 32px; font-weight: 400; color: var(--dark-brown); font-style: italic; margin: 0;">Stock Management</h2>
	</div>

	<form asp-action="Index" method="get" style="background: linear-gradient(135deg, #FFFFFF 0%, #FEFCF9 100%); border-radius: 20px; padding: 25px; margin-bottom: 30px; box-shadow: 0 4px 20px rgba(61, 40, 23, 0.08); border: 1px solid rgba(232, 213, 196, 0.3); display: flex; gap: 15px; align-items: end; flex-wrap: wrap;">
		<div style="flex: 1; min-width: 250px;">
			<label class="form-label" style="color: var(--dark-brown); font-weight: 600; margin-bottom: 8px;">Search by product name</label>
			<input type="text" name="sTerm" class="form-control" placeholder="Enter product name..." value="@ViewContext.HttpContext.Request.Query["sTerm"]" style="border-radius: 12px; border: 2px solid rgba(232, 213, 196, 0.5); padding: 12px 15px;" />
		</div>
		<button type="submit" class="btn btn-primary" style="border-radius: 12px; padding: 12px 24px;">
			<i class="bi bi-search"></i> Search
		</button>
		<a asp-action="Index" asp-controller="Stock" class="btn btn-secondary" style="border-radius: 12px; padding: 12px 24px;">
			<i class="bi bi-x-circle"></i> Clear
		</a>
	</form>

	@if (Model != null && Model.Any())
	{
		<div style="background: linear-gradient(135deg, #FFFFFF 0%, #FEFCF9 100%); border-radius: 20px; padding: 30px; box-shadow: 0 4px 20px rgba(61, 40, 23, 0.08); border: 1px solid rgba(232, 213, 196, 0.3);">
			<div class="table-responsive">
				<table class="table table-hover" style="margin: 0;">
					<thead style="background: linear-gradient(135deg, var(--dark-brown) 0%, #8B6F47 100%); color: white; border-radius: 12px;">
						<tr>
							<th style="padding: 15px; border: none; font-weight: 600;">Product Name</th>
							<th style="padding: 15px; border: none; font-weight: 600; text-align: center;">Stock Quantity</th>
							<th style="padding: 15px; border: none; font-weight: 600; text-align: center;">Status</th>
							<th style="padding: 15px; border: none; font-weight: 600; text-align: center; width: 200px;">Actions</th>
						</tr>
					</thead>
					<tbody>
						@foreach (var item in Model)
						{
							<tr style="border-bottom: 1px solid rgba(232, 213, 196, 0.3); transition: background 0.2s;">
								<td style="padding: 20px; border: none; color: var(--text-dark); font-size: 16px; font-weight: 600;">
									<i class="bi bi-box-seam" style="color: var(--light-brown); margin-right: 10px;"></i>
									@item.ProductName
								</td>
								<td style="padding: 20px; border: none; text-align: center;">
									<span class="badge" style="padding: 8px 16px; border-radius: 20px; font-size: 14px; font-weight: 600; @(item.Quantity > 0 ? "background: #d4edda; color: #155724;" : "background: #f8d7da; color: #721c24;")">
										@item.Quantity
									</span>
								</td>
								<td style="padding: 20px; border: none; text-align: center;">
									@if (item.Quantity > 0)
									{
										<span style="color: #28a745; font-weight: 600;">
											<i class="bi bi-check-circle"></i> In Stock
										</span>
									}
									else
									{
										<span style="color: #dc3545; font-weight: 600;">
											<i class="bi bi-x-circle"></i> Out of Stock
										</span>
									}
								</td>
								<td style="padding: 20px; border: none; text-align: center;">
									<a asp-action="ManageStock" asp-controller="Stock" asp-route-productId="@item.ProductId" class="btn btn-info btn-sm" style="border-radius: 8px; padding: 8px 16px; display: inline-flex; align-items: center; gap: 6px; font-size: 14px;">
										<i class="bi bi-pencil-square"></i> Update Stock
									</a>
								</td>
							</tr>
						}
					</tbody>
				</table>
			</div>
		</div>
	}
	else
	{
		<div style="background: linear-gradient(135deg, #FFFFFF 0%, #FEFCF9 100%); border-radius: 20px; padding: 60px 40px; text-align: center; box-shadow: 0 4px 20px rgba(61, 40, 23, 0.08); border: 1px solid rgba(232, 213, 196, 0.3);">
			<i class="bi bi-inbox" style="font-size: 64px; color: var(--light-brown); opacity: 0.5; margin-bottom: 20px;"></i>
			<h3 style="font-family: 'Playfair Display', serif; font-size: 28px; color: var(--dark-brown); margin-bottom: 15px; font-style: italic;">No Products Found</h3>
			<p style="color: var(--text-dark); margin-bottom: 30px;">Add products to manage their stock.</p>
			<a asp-action="Index" asp-controller="Product" class="btn btn-primary">
				<i class="bi bi-plus-circle"></i> Add Products
			</a>
		</div>
	}
</div>

<style>
	.table tbody tr:hover {
		background-color: rgba(232, 213, 196, 0.1);
	}
</style>
