@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> SignInManager
<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Lustre - Elegant Skincare</title>
	<link href="/css/bootstrap.min.css" rel="stylesheet" />
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
	<link href="/css/custom.css" rel="stylesheet" />
	<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@300;400;600&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
</head>
<body>
	<header class="elegant-header">
		<div class="header-container">
			<a href="/Home/Index" style="text-decoration: none; display: flex; align-items: center; gap: 15px;">
				<div class="logo-section">
					<div class="logo-icon">L</div>
					<div class="brand-name">Lustre</div>
				</div>
			</a>
			<nav>
				<ul class="nav-links">
					<li><a href="/Home/Index">Home</a></li>
					<li><a href="/Home/Privacy">About Us</a></li>
					<li><a href="/Home/Index#products">Catalog</a></li>
					@if (User.IsInRole(Roles.Admin.ToString()))
					{
						<li><a href="/AdminOperations/Dashboard">Dashboard</a></li>
					}
					<li>
						<a href="/Cart/GetUserCart" style="position: relative;">
							<i class="bi bi-cart" style="font-size: 20px;"></i>
							<span id="cartCount" style="position: absolute; top: -8px; right: -8px; background: var(--light-brown); color: white; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; font-size: 12px;">0</span>
						</a>
					</li>
					@if (SignInManager.IsSignedIn(User))
					{
						<li><a href="/Identity/Account/Manage/Index"><span id="username">@User.Identity?.Name</span></a></li>
						<li>
							<form asp-area="Identity" asp-page="/Account/Logout" asp-route-returnUrl="@Url.Action("Index", "Home", new { area = "" })" style="display: inline;">
								<button type="submit" style="background: none; border: none; color: var(--text-dark); cursor: pointer; font-size: 16px;">Logout</button>
							</form>
						</li>
					}
					else
					{
						<li><a href="/Identity/Account/Register">Register</a></li>
						<li><a href="/Identity/Account/Login">Login</a></li>
					}
					<li><a href="/Home/Index#search-section" class="search-icon-link" style="text-decoration: none; color: var(--text-dark);"><i class="bi bi-search search-icon"></i></a></li>
				</ul>
			</nav>
		</div>
	</header>

	<div class="my-2">
		<partial name="_Notifications" />
	</div>

	@RenderBody()

	<footer class="elegant-footer">
		<div class="footer-content">
			<div class="footer-brand">
				<h3>Lustre</h3>
				<p class="footer-tagline">Wishing for your next visit</p>
				<div class="social-icons">
					<a href="#" class="social-icon"><i class="bi bi-behance"></i></a>
					<a href="#" class="social-icon"><i class="bi bi-facebook"></i></a>
					<a href="#" class="social-icon"><i class="bi bi-instagram"></i></a>
					<a href="#" class="social-icon"><i class="bi bi-youtube"></i></a>
				</div>
			</div>
			<div class="footer-section">
				<h4>Quick Links</h4>
				<ul class="footer-links">
					<li><a href="/Home/Index">Home</a></li>
					<li><a href="/Home/Privacy">About Us</a></li>
					<li><a href="/Home/Index#products">Catalog</a></li>
					<li><a href="#">Blog</a></li>
				</ul>
			</div>
			<div class="footer-section">
				<h4>Contact Us</h4>
				<div class="footer-contact">
					<p><i class="bi bi-telephone"></i> 00 24 34 34 24</p>
					<p><i class="bi bi-envelope"></i> sg@gmail.com</p>
					<p><i class="bi bi-geo-alt"></i> sg, Casablanca</p>
				</div>
			</div>
		</div>
		<div class="footer-bottom">
			<p>&copy; 2024 Lustre. All rights reserved.</p>
		</div>
	</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
<script>
	loadCartCount();
	async function loadCartCount() {
		try {
			var response = await fetch(`/Cart/GetTotalItemInCart`);
			if (response.status == 200) {
				var result = await response.json();
				var cartCountEl = document.getElementById("cartCount");
				if (cartCountEl) {
					cartCountEl.innerHTML = result;
				}
			}
		}
		catch (err) {
			console.log(err);
		}
	}
</script>

@await RenderSectionAsync("Scripts", required: false)
</body>
</html>
